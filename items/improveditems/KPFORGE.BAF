IF
	Clicked([ANYONE])
	Range(LastTrigger,10)
	Global("VP_Forge_FlailAges","GLOBAL",0)
THEN
	RESPONSE #100
		DisplayString(Myself,38709)  // This hidden forge seems to work by the mind's will alone. Its magic is such that it will fix the Flail of Ages merely by your wishing it to do so. The forge has a handle with several chains attached. You shall have to find the heads of the flail and bring them to this forge. 
		SetGlobal("VP_Forge_FlailAges","GLOBAL",1)
END

IF
	Clicked([ANYONE])
	Range(LastTrigger,10)
	PartyHasItem("BLUN30B")  // Flail Head (Electric)
	PartyHasItem("BLUN30C")  // Flail of Ages +4
	Global("VP_FlailAges_Done","GLOBAL",0)
THEN
	RESPONSE #100
		SetGlobal("VP_FlailAges_Done","GLOBAL",1)
		DisplayString(Myself,38712)  // You place part of the flail on the forge and the work begins. The hammer begins to pound as invisible forces bring up a chain to attach to the magical ball. A short time later, the flail is ready.
		TakePartyItem("BLUN30B")  // Flail Head (Electric)
		TakePartyItem("BLUN30C")  // Flail of Ages +4
		GiveItemCreate("BLUN30",LastTrigger,0,0,0)  // Flail of Ages +5
		AddexperienceParty(42350)
END

IF
	Clicked([ANYONE])
	Range(LastTrigger,10)
	PartyHasItem("BLUN30A")  // Flail Head (Poison)
	PartyHasItem("BLUN30D")  // Flail of Ages +4
	Global("VP_FlailAges_Done","GLOBAL",0)
THEN
	RESPONSE #100
		SetGlobal("VP_FlailAges_Done","GLOBAL",1)
		DisplayString(Myself,38712)  // You place part of the flail on the forge and the work begins. The hammer begins to pound as invisible forces bring up a chain to attach to the magical ball. A short time later, the flail is ready.
		TakePartyItem("BLUN30A")  // Flail Head (Poison)
		TakePartyItem("BLUN30D")  // Flail of Ages +4
		GiveItemCreate("BLUN30",LastTrigger,0,0,0)  // Flail of Ages +5
		AddexperienceParty(42350)
END

IF
	Clicked([ANYONE])
	Range(LastTrigger,10)
	PartyHasItem("BLUN14")  // Flail of Ages +3
	PartyHasItem("BLUN30A")  // Flail Head (Poison)
THEN
	RESPONSE #100
		DisplayString(Myself,38712)  // You place part of the flail on the forge and the work begins. The hammer begins to pound as invisible forces bring up a chain to attach to the magical ball. A short time later, the flail is ready.
		TakePartyItem("BLUN14")  // Flail of Ages +3
		TakePartyItem("BLUN30A")  // Flail Head (Poison)
		GiveItemCreate("BLUN30C",LastTrigger,0,0,0)  // Flail of Ages +4
END

IF
	Clicked([ANYONE])
	Range(LastTrigger,10)
	PartyHasItem("BLUN14")  // Flail of Ages +3
	PartyHasItem("BLUN30B")  // Flail Head (Electric)
THEN
	RESPONSE #100
		DisplayString(Myself,38712)  // You place part of the flail on the forge and the work begins. The hammer begins to pound as invisible forces bring up a chain to attach to the magical ball. A short time later, the flail is ready.
		TakePartyItem("BLUN14")  // Flail of Ages +3
		TakePartyItem("BLUN30B")  // Flail Head (Electric)
		GiveItemCreate("BLUN30D",LastTrigger,0,0,0)  // Flail of Ages +4
END

IF
	Clicked([ANYONE])
	Range(LastTrigger,10)
	OR(2)
		PartyHasItem("BLUN14A")  // Flail Head (Cold)
		PartyHasItem("BLUN14G")  // Flail of Ages +1
	OR(2)
		PartyHasItem("BLUN14B")  // Flail Head (Fire)
		PartyHasItem("BLUN14H")  // Flail of Ages +1
	OR(2)
		PartyHasItem("BLUN14C")  // Flail Head (Acid)
		PartyHasItem("BLUN14I")  // Flail of Ages +1
THEN
	RESPONSE #100
		DisplayString(Myself,38712)  // You place part of the flail on the forge and the work begins. The hammer begins to pound as invisible forces bring up a chain to attach to the magical ball. A short time later, the flail is ready.
		TakePartyItem("BLUN14A")  // Flail Head (Cold)
		TakePartyItem("BLUN14B")  // Flail Head (Fire)
		TakePartyItem("BLUN14C")  // Flail Head (Acid)
		TakePartyItem("BLUN14G")  // Flail of Ages +1
		TakePartyItem("BLUN14H")  // Flail of Ages +1
		TakePartyItem("BLUN14I")  // Flail of Ages +1
		GiveItemCreate("BLUN14",LastTrigger,0,0,0)  // Flail of Ages +3
END

IF
	Clicked([ANYONE])
	Range(LastTrigger,10)
	OR(2)
		PartyHasItem("BLUN14A")  // Flail Head (Cold)
		PartyHasItem("BLUN14G")  // Flail of Ages +1
	OR(2)
		PartyHasItem("BLUN14B")  // Flail Head (Fire)
		PartyHasItem("BLUN14H")  // Flail of Ages +1
THEN
	RESPONSE #100
		DisplayString(Myself,38712)  // You place part of the flail on the forge and the work begins. The hammer begins to pound as invisible forces bring up a chain to attach to the magical ball. A short time later, the flail is ready.
		TakePartyItem("BLUN14A")  // Flail Head (Cold)
		TakePartyItem("BLUN14B")  // Flail Head (Fire)
		TakePartyItem("BLUN14G")  // Flail of Ages +1
		TakePartyItem("BLUN14H")  // Flail of Ages +1
		GiveItemCreate("BLUN14D",LastTrigger,0,0,0)  // Flail of Ages +2
END

IF
	Clicked([ANYONE])
	Range(LastTrigger,10)
	OR(2)
		PartyHasItem("BLUN14A")  // Flail Head (Cold)
		PartyHasItem("BLUN14G")  // Flail of Ages +1
	OR(2)
		PartyHasItem("BLUN14C")  // Flail Head (Acid)
		PartyHasItem("BLUN14I")  // Flail of Ages +1
THEN
	RESPONSE #100
		DisplayString(Myself,38712)  // You place part of the flail on the forge and the work begins. The hammer begins to pound as invisible forces bring up a chain to attach to the magical ball. A short time later, the flail is ready.
		TakePartyItem("BLUN14A")  // Flail Head (Cold)
		TakePartyItem("BLUN14C")  // Flail Head (Acid)
		TakePartyItem("BLUN14G")  // Flail of Ages +1
		TakePartyItem("BLUN14I")  // Flail of Ages +1
		GiveItemCreate("BLUN14E",LastTrigger,0,0,0)  // Flail of Ages +2
END

IF
	Clicked([ANYONE])
	Range(LastTrigger,10)
	OR(2)
		PartyHasItem("BLUN14B")  // Flail Head (Fire)
		PartyHasItem("BLUN14H")  // Flail of Ages +1
	OR(2)
		PartyHasItem("BLUN14C")  // Flail Head (Acid)
		PartyHasItem("BLUN14I")  // Flail of Ages +1
THEN
	RESPONSE #100
		DisplayString(Myself,38712)  // You place part of the flail on the forge and the work begins. The hammer begins to pound as invisible forces bring up a chain to attach to the magical ball. A short time later, the flail is ready.
		TakePartyItem("BLUN14B")  // Flail Head (Fire)
		TakePartyItem("BLUN14C")  // Flail Head (Acid)
		TakePartyItem("BLUN14H")  // Flail of Ages +1
		TakePartyItem("BLUN14I")  // Flail of Ages +1
		GiveItemCreate("BLUN14F",LastTrigger,0,0,0)  // Flail of Ages +2
END

IF
	Clicked([ANYONE])
	Range(LastTrigger,10)
	OR(2)
		PartyHasItem("BLUN14A")  // Flail Head (Cold)
		PartyHasItem("BLUN14G")  // Flail of Ages +1
	PartyHasItem("BLUN14F")  // Flail of Ages +2
THEN
	RESPONSE #100
		DisplayString(Myself,38712)  // You place part of the flail on the forge and the work begins. The hammer begins to pound as invisible forces bring up a chain to attach to the magical ball. A short time later, the flail is ready.
		TakePartyItem("BLUN14A")  // Flail Head (Cold)
		TakePartyItem("BLUN14G")  // Flail of Ages +1
		TakePartyItem("BLUN14F")  // Flail of Ages +2
		GiveItemCreate("BLUN14",LastTrigger,0,0,0)  // Flail of Ages +3
END

IF
	Clicked([ANYONE])
	Range(LastTrigger,10)
	OR(2)
		PartyHasItem("BLUN14B")  // Flail Head (Fire)
		PartyHasItem("BLUN14H")  // Flail of Ages +1
	PartyHasItem("BLUN14E")  // Flail of Ages +2
THEN
	RESPONSE #100
		DisplayString(Myself,38712)  // You place part of the flail on the forge and the work begins. The hammer begins to pound as invisible forces bring up a chain to attach to the magical ball. A short time later, the flail is ready.
		TakePartyItem("BLUN14B")  // Flail Head (Fire)
		TakePartyItem("BLUN14H")  // Flail of Ages +1
		TakePartyItem("BLUN14E")  // Flail of Ages +2
		GiveItemCreate("BLUN14",LastTrigger,0,0,0)  // Flail of Ages +3
END

IF
	Clicked([ANYONE])
	Range(LastTrigger,10)
	OR(2)
		PartyHasItem("BLUN14C")  // Flail Head (Acid)
		PartyHasItem("BLUN14I")  // Flail of Ages +1
	PartyHasItem("BLUN14D")  // Flail of Ages +2
THEN
	RESPONSE #100
		DisplayString(Myself,38712)  // You place part of the flail on the forge and the work begins. The hammer begins to pound as invisible forces bring up a chain to attach to the magical ball. A short time later, the flail is ready.
		TakePartyItem("BLUN14C")  // Flail Head (Acid)
		TakePartyItem("BLUN14I")  // Flail of Ages +1
		TakePartyItem("BLUN14D")  // Flail of Ages +2
		GiveItemCreate("BLUN14",LastTrigger,0,0,0)  // Flail of Ages +3
END

IF
	Clicked([ANYONE])
	Range(LastTrigger,10)
	PartyHasItem("BLUN14A")  // Flail Head (Cold)
THEN
	RESPONSE #100
		DisplayString(Myself,38712)  // You place part of the flail on the forge and the work begins. The hammer begins to pound as invisible forces bring up a chain to attach to the magical ball. A short time later, the flail is ready.
		TakePartyItem("BLUN14A")  // Flail Head (Cold)
		GiveItemCreate("BLUN14G",LastTrigger,0,0,0)  // Flail of Ages +1
END

IF
	Clicked([ANYONE])
	Range(LastTrigger,10)
	PartyHasItem("BLUN14B")  // Flail Head (Fire)
THEN
	RESPONSE #100
		DisplayString(Myself,38712)  // You place part of the flail on the forge and the work begins. The hammer begins to pound as invisible forces bring up a chain to attach to the magical ball. A short time later, the flail is ready.
		TakePartyItem("BLUN14B")  // Flail Head (Fire)
		GiveItemCreate("BLUN14H",LastTrigger,0,0,0)  // Flail of Ages +1
END

IF
	Clicked([ANYONE])
	Range(LastTrigger,10)
	PartyHasItem("BLUN14C")  // Flail Head (Acid)
THEN
	RESPONSE #100
		DisplayString(Myself,38712)  // You place part of the flail on the forge and the work begins. The hammer begins to pound as invisible forces bring up a chain to attach to the magical ball. A short time later, the flail is ready.
		TakePartyItem("BLUN14C")  // Flail Head (Acid)
		GiveItemCreate("BLUN14I",LastTrigger,0,0,0)  // Flail of Ages +1
END

IF
	Clicked([ANYONE])
	Range(LastTrigger,10)
	!PartyHasItem("BLUN14A")  // Flail Head (Cold)
	!PartyHasItem("BLUN14B")  // Flail Head (Fire)
	!PartyHasItem("BLUN14C")  // Flail Head (Acid)
	!PartyHasItem("BLUN14D")  // Flail of Ages +2
	!PartyHasItem("BLUN14E")  // Flail of Ages +2
	!PartyHasItem("BLUN14F")  // Flail of Ages +2
	!PartyHasItem("BLUN14G")  // Flail of Ages +1
	!PartyHasItem("BLUN14H")  // Flail of Ages +1
	!PartyHasItem("BLUN14I")  // Flail of Ages +1
	Global("ForgeUsed","AR1302",0)  // De'Arnise Keep 1st Floor
THEN
	RESPONSE #100
		DisplayString(Myself,38709)  // This hidden forge seems to work by the mind's will alone. Its magic is such that it will fix the Flail of Ages merely by your wishing it to do so. The forge has a handle with several chains attached. You shall have to find the heads of the flail and bring them to this forge. 
END

IF
	Clicked([ANYONE])
	Range(LastTrigger,10)
	Global("VP_FlailAges_Done","GLOBAL",1)
THEN
	RESPONSE #100
		DisplayString(Myself,38719)  // There is no further use for the forge. The Flail of Ages is totally repaired.
END

IF
	Clicked([ANYONE])
	!Range(LastTrigger,10)
THEN
	RESPONSE #100
		DisplayString(Myself,14702)  // You are too far away to use that.
END

